<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="casambitest"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<!--CasambiBridge -->
	<bridge-type id="casambibridge">
		<label>casambiTest Bridge</label>
        <description>Casambi Bridge to Server</description>
		<channels>
		  <channel id="peer" typeId="peerOnline"/>
		  <channel id="message" typeId="casambiMessage"/>
		  <!-- <channel id="dim" typeId="casambiDim"/> -->
		</channels>
		<config-description>
            <parameter-group name="connection">
              <label>Casambi connection</label>
              <description>Casambi connection parameters (API-key, userid, passwords)</description>
            </parameter-group>
            <parameter-group name="logging">
              <label>Logging</label>
              <description>Settings for Casambi message logging</description>
              <advanced>true</advanced>
            </parameter-group>
            <parameter-group name="remcmd">
              <label>Remote Command</label>
              <description>Remote command to reactivate the local Casambi bridge device</description>
              <advanced>true</advanced>
            </parameter-group>
		    <parameter name="apiKey" type="text" required="true" readOnly="false" multiple="false" groupName="connection">
		      <required>true</required>
		      <label>Casambi API key</label>
		      <description>API key to connect to the Casambi server. See https://developer.casambi.com</description>
		    </parameter>
		    <parameter name="userId" type="text" required="true" readOnly="false" multiple="false" groupName="connection">
		      <required>true</required>
		      <context>email</context>
		      <label>Casambi user id</label>
		      <description>User id to connect to the Casambi server.</description>
		    </parameter>
		    <parameter name="userPassword" type="text" required="true" readOnly="false" multiple="false" groupName="connection">
		      <required>true</required>
		      <context>password</context>
		      <label>Casambi user password</label>
		      <description>User password to connect to the Casambi server.</description>
		    </parameter>
		    <parameter name="networkPassword" type="text" required="true" readOnly="false" multiple="false" groupName="connection">
		      <required>true</required>
		      <context>password</context>
		      <label>Casambi network password</label>
		      <description>Network password to connect to the Casambi server.</description>
		    </parameter>
            <parameter name="logMessages" type="boolean" required="false" readOnly="false" multiple="false" groupName="logging">
              <required>false</required>
              <label>Enable logging</label>
              <description>Enable logging of Casambi messages</description>
            </parameter>
            <parameter name="logDir" type="text" required="false" readOnly="false" multiple="false" groupName="logging">
              <required>false</required>
              <label>Directory path</label>
              <description>Path of directory where the logfiles are kept. Must be writable by OpenHAB.</description>
            </parameter>
            <parameter name="useRemCmd" type="boolean" required="false" readOnly="false" multiple="false" groupName="remcmd">
              <required>false</required>
              <label>Enable sending of a command to reacivate the local Casambi peer device</label>
              <description>Enable logging of Casambi messages</description>
            </parameter>
            <parameter name="remCmdStr" type="text" required="false" readOnly="false" multiple="false" groupName="remcmd">
              <required>false</required>
              <label>Casambi Peer Reactivation Coammand</label>
              <description>Command to be sent to the Casambi peer device to reactivate the bridge.</description>
            </parameter>
 	    </config-description>	
		<!-- <config-description-ref uri="thing-type:casambibridge"/> -->
	</bridge-type>
	
    <channel-type id="peerOnline">
        <item-type>Contact</item-type>
        <label>Peer Online</label>
        <description>Online status of local Casambi peer device (e.g. mobile phone). If the false, reactivation command is sent (if configured).</description>
    </channel-type>
    <channel-type id="casambiMessage">
        <item-type>Text</item-type>
        <label>Casambi Message</label>
        <description>Last Message from the casambi server</description>
    </channel-type>
	
	<!--CasambiLuminary -->
	<thing-type id="luminary">
		<supported-bridge-type-refs>
			<bridge-type-ref id="casambibridge"/>
		</supported-bridge-type-refs>
		<label>Casambi Luminary</label>
		<description>Casambi luminary, on/off/intensity</description>
        <representation-property>luminaryUID</representation-property>
        <config-description>
            <parameter-group name="identification">
              <label>Luminary identification</label>
              <description>Data for luminary identification (number, name, uid)</description>
              <advanced>false</advanced>
            </parameter-group>
            <parameter-group name="properties">
              <label>Luminary properties</label>
              <description>Properties (control types, min/max color temperature)</description>
              <advanced>true</advanced>
            </parameter-group>

            <parameter name="luminaryNumber" type="integer" min="0" required="true" readOnly="false" multiple="false" groupName="identification">
              <required>true</required>
              <label>Casambi luminary Id</label>
              <description>Luminary id as assigned by the Casambi system</description>
            </parameter>
            <parameter name="luminaryName" type="text" required="true" readOnly="false" multiple="false" groupName="identification">
              <required>true</required>
              <label>Casambi Luminary Name</label>
              <description>Luminary name</description>
            </parameter>
            <parameter name="luminaryUID" type="text" required="true" readOnly="false" multiple="false" groupName="identification">
              <required>true</required>
              <label>Casambi Luminary unique Id</label>
              <description>Luminary unique id, based on the fixture id.</description>
            </parameter>

            <parameter name="hasDimmer" type="boolean" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Luminary can be dimmed</label>
              <description>Luminary brightness can be controlled</description>
              <advanced>true</advanced>
            </parameter>
            <parameter name="hasColor" type="boolean" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Luminary color may be set</label>
              <description>Luminary color may be set (hue, saturation, brigtness)</description>
              <advanced>true</advanced>
            </parameter>
            <parameter name="hasCCT" type="boolean" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Luminary color temperature may be set</label>
              <description>Luminary color temperature may be set (between min and max values))</description>
              <advanced>true</advanced>
            </parameter>
            <parameter name="hasColorbalance" type="boolean" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Balance between color and white may be set</label>
              <description>Balance between color and white</description>
              <advanced>true</advanced>
            </parameter>
            <parameter name="tempMin" type="decimal" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Minimum color temperature</label>
              <description>Minimum color temperature for CCT setting</description>
              <advanced>true</advanced>
            </parameter>
            <parameter name="tempMax" type="decimal" required="false" readOnly="false" multiple="false" groupName="properties">
              <required>false</required>
              <label>Maximum color temperature</label>
              <description>Maximum color temperature for CCT setting</description>
              <advanced>true</advanced>
            </parameter>            
        </config-description>
        <!-- <config-description-ref uri="thing-type:luminary:casambibridge"/> -->
	</thing-type>

	<!--CasambiScenes -->
	<thing-type id="scenes">
		<supported-bridge-type-refs>
			<bridge-type-ref id="casambibridge"/>
		</supported-bridge-type-refs>
		<label>casambiTest Scenes</label>
		<description>Casambi Lighting Scenes. Individual Scenes are channels.</description>
	</thing-type>
</thing:thing-descriptions>
